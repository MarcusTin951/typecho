/**
* 后台头部导航
*/

:root {
  --te-nav-border-color: 1px solid rgba(255, 255, 255, .05);
  --te-nav-bg-color: var(--te-primary-900);
  --te-nav-link-color: var(--te-primary-200);
  --te-nav-link-hover-color: var(--te-white);
  --te-nav-link-hover-bg-color: var(--te-primary-800);
  --te-nav-active-bg-color: var(--te-primary-500);
}

.typecho-head-nav {
  background: var(--te-nav-bg-color);
  position: relative;

  a, button.menu-bar {
    padding: 0 16px;
    height: 36px;
    line-height: 36px;
    color: var(--te-nav-link-color);

    &:focus,
    &:hover {
      background: var(--te-nav-link-hover-bg-color);
      color: var(--te-nav-link-hover-color);
      text-decoration: none;
    }
  }

  button.menu-bar {
    display: none;
  }

  #typecho-nav-list {
    display: flex;
    ul {
      list-style: none;
      margin: 0;
      padding: 0;
      position: relative;

      .parent a {
        display: inline-block;
      }

      .child {
        position: absolute;
        display: none;
        min-width: 160px; 
        max-width: 240px;
        background: var(--te-nav-link-hover-bg-color);
        z-index: 250;
        border-radius: 0 0 var(--te-border-radius) var(--te-border-radius);
        box-shadow: var(--te-box-shadow);
        overflow: hidden;

        li {
          &.return {
            display: none;
          }

          a {
            display: block;
            overflow: hidden;
            text-overflow : ellipsis;
            white-space: nowrap;

            &:hover,
            &:focus {
              background: var(--te-primary-700);
            }
          }

          &.focus a {
            background: var(--te-nav-active-bg-color);
            color: var(--te-nav-link-hover-color);
          }
        }
      }

      &.focus .parent a,
      &.root:hover .parent a,
      &.root:focus-within .parent a {
        background: var(--te-nav-link-hover-bg-color);
      }

      &.root:hover .child,
      &.root.expanded .child {
        display: block;
      }
    }
  }

  .nav-operate {
    a {
      display: inline-block;
      
      &:hover {
        background-color: var(--te-nav-link-hover-bg-color);
      }
    }
  }
}


@media (max-width: calc($screen-phone - 1px)) {
  @keyframes out {
    from { left: 0%; }
    to { left: -100%; }
  }

  @keyframes in {
    from { left: -100%; }
    to { left: 0%; }
  }

  .typecho-head-nav {
    padding: 0;
    position: fixed;
    bottom: 0;
    width: 100%;
    z-index: 10;

    #typecho-nav-list {
      display: none;
    }

    button.menu-bar {
      display: inline-block;
      background: transparent;
      border: none;
      
      &.focus {
        color: var(--te-nav-link-hover-color);
  
        & + #typecho-nav-list {
          display: block;
          float: none;
          position: absolute;
          bottom: 36px;
          width: 100%;
          
          & > ul {
            background: var(--te-nav-link-hover-bg-color);
            border-bottom: var(--te-nav-border-color);
            position: static;

            .parent a {
              display: block;
              background: var(--te-nav-link-hover-bg-color);
            }
            
            .child {
              position: absolute;
              bottom: 0;
              left: 100%;
              top: auto;
              z-index: 20;
              width: 100%;
              max-width: 100%;
              min-width: auto;
              border-radius: 0;

              li {
                border-bottom: var(--te-nav-border-color);
                &.return {
                  display: block;
                  text-align: center;
                }
              }
            }
          }

          &.expanded {
            animation: out .15s ease-out forwards;
          }

          &.noexpanded {
            animation: in .15s ease-out forwards;
          }
        }
      }
    }


    .focus .parent a {
      background: var(--te-nav-active-bg-color) !important;
      color: var(--te-nav-link-hover-color);
    }
  }
}
